!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(10);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const s=n(3);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(4);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const u=n(2);t.Disposable=u.Disposable,t.Event=u.Event,t.Emitter=u.Emitter;const c=n(11);t.CancellationTokenSource=c.CancellationTokenSource,t.CancellationToken=c.CancellationToken;const l=n(12);var f,d,h,p,g,m,v;r(n(13)),r(n(17)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(d=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(d=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class y extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,y.prototype)}}function w(e,t,n,r){let s=0,a=0,w=0;const b="2.0";let E,x,R=void 0,T=Object.create(null),_=void 0,C=Object.create(null),N=new l.LinkedMap,k=Object.create(null),q=Object.create(null),M=d.Off,S=h.Text,P=v.New,O=new u.Emitter,D=new u.Emitter,L=new u.Emitter,I=new u.Emitter;function F(e){return"req-"+e.toString()}function j(e,t){var n;o.isRequestMessage(t)?e.set(F(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++w).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function A(e){}function W(){return P===v.Listening}function B(){return P===v.Closed}function $(){return P===v.Disposed}function U(){P!==v.New&&P!==v.Listening||(P=v.Closed,D.fire(void 0))}function z(){E||0===N.size||(E=setImmediate(()=>{E=void 0,function(){if(0===N.size)return;let e=N.shift();try{o.isRequestMessage(e)?function(e){if($())return;function n(n,r,i){let s={jsonrpc:b,id:e.id};n instanceof o.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,K(s,r,i),t.write(s)}function r(n,r,i){let o={jsonrpc:b,id:e.id,error:n.toJson()};K(o,r,i),t.write(o)}!function(e){if(M===d.Off||!x)return;if(S===h.Text){let t=void 0;M===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Received request '${e.method} - (${e.id})'.`,t)}else V("receive-request",e)}(e);let s,a,u=T[e.method];u&&(s=u.type,a=u.handler);let l=Date.now();if(a||R){let u=new c.CancellationTokenSource,f=String(e.id);q[f]=u;try{let c,d=c=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(u.token):R(e.method,u.token):i.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,u.token):R(e.method,...e.params,u.token):a?a(e.params,u.token):R(e.method,e.params,u.token);c?d.then?d.then(t=>{delete q[f],n(t,e.method,l)},t=>{delete q[f],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete q[f],n(c,e.method,l)):(delete q[f],function(n,r,i){void 0===n&&(n=null);let o={jsonrpc:b,id:e.id,result:n};K(o,r,i),t.write(o)}(c,e.method,l))}catch(t){delete q[f],t instanceof o.ResponseError?n(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if($())return;let t,r=void 0;if(e.method===f.type.method)t=e=>{let t=e.id,n=q[String(t)];n&&n.cancel()};else{let n=C[e.method];n&&(t=n.handler,r=n.type)}if(t||_)try{!function(e){if(M===d.Off||!x||e.method===g.type.method)return;if(S===h.Text){let t=void 0;M===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Received notification '${e.method}'.`,t)}else V("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():_(e.method):i.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):_(e.method,...e.params):t?t(e.params):_(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else L.fire(e)}(e):o.isResponseMessage(e)?function(e){if($())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=k[t];if(function(e,t){if(M===d.Off||!x)return;if(S===h.Text){let n=void 0;if(M===d.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";x.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else x.log(`Received response ${e.id} without active response promise.`,n)}else V("receive-response",e)}(e,r),r){delete k[t];try{if(e.error){let t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=k[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{z()}}()}))}e.onClose(U),e.onError((function(e){O.fire([e,void 0,void 0])})),t.onClose(U),t.onError((function(e){O.fire(e)}));let H=e=>{try{if(o.isNotificationMessage(e)&&e.method===f.type.method){let n=F(e.params.id),i=N.get(n);if(o.isRequestMessage(i)){let o=r&&r.cancelUndispatched?r.cancelUndispatched(i,A):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return N.delete(n),o.id=i.id,K(o,e.method,Date.now()),void t.write(o)}}j(N,e)}finally{z()}};function K(e,t,n){if(M!==d.Off&&x)if(S===h.Text){let r=void 0;M===d.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),x.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else V("send-response",e)}function V(e,t){if(!x||M===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};x.log(n)}function J(){if(B())throw new y(m.Closed,"Connection is closed.");if($())throw new y(m.Disposed,"Connection is disposed.")}function Z(e){return void 0===e?null:e}function G(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=Z(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(Z(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let Q={sendNotification:(e,...n)=>{let r,o;if(J(),i.string(e))switch(r=e,n.length){case 0:o=null;break;case 1:o=n[0];break;default:o=n}else r=e.method,o=G(e,n);let s={jsonrpc:b,method:r,params:o};!function(e){if(M!==d.Off&&x)if(S===h.Text){let t=void 0;M===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),x.log(`Sending notification '${e.method}'.`,t)}else V("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{J(),i.func(e)?_=e:t&&(i.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,a;J(),function(){if(!W())throw new Error("Call listen() first.")}();let u=void 0;if(i.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:c.CancellationToken.is(n[0])?(a=null,u=n[0]):a=Z(n[0]);break;default:const e=n.length-1;c.CancellationToken.is(n[e])?(u=n[e],a=2===n.length?Z(n[0]):n.slice(0,e).map(e=>Z(e))):a=n.map(e=>Z(e))}else{r=e.method,a=G(e,n);let t=e.numberOfParams;u=c.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,p=new Promise((e,n)=>{let i={jsonrpc:b,id:l,method:r,params:a},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(M!==d.Off&&x)if(S===h.Text){let t=void 0;M===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),x.log(`Sending request '${e.method} - (${e.id})'.`,t)}else V("send-request",e)}(i);try{t.write(i)}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(k[String(l)]=s)});return u&&u.onCancellationRequested(()=>{Q.sendNotification(f.type,{id:l})}),p},onRequest:(e,t)=>{J(),i.func(e)?R=e:t&&(i.string(e)?T[e]={type:void 0,handler:t}:T[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,o=h.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||h.Text)),S=o,x=(M=e)===d.Off?void 0:t,!r||B()||$()||Q.sendNotification(p.type,{value:d.toString(e)})},onError:O.event,onClose:D.event,onUnhandledNotification:L.event,onDispose:I.event,dispose:()=>{if($())return;P=v.Disposed,I.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(k).forEach(e=>{k[e].reject(n)}),k=Object.create(null),q=Object.create(null),N=new l.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{J(),function(){if(W())throw new y(m.AlreadyListening,"Connection is already listening")}(),P=v.Listening,e.listen(H)},inspect:()=>{console.log("inspect")}};return Q.onNotification(g.type,e=>{M!==d.Off&&x&&x.log(e.message,M===d.Verbose?e.verbose:void 0)}),Q}t.ConnectionError=y,function(e){e.is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,i){var o;return r||(r=t.NullLogger),w(void 0!==(o=e).listen&&void 0===o.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),r,i)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,o=n.length;i<o;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let o;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i._noop=function(){},t.Emitter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(1);let o=8192,s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0],u="\r\n";class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(u).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class l{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class f extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=f;t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends f{constructor(e,t="utf-8"){super(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(1);let o="Content-Length: ",s="\r\n";!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a;t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.sending=!0,this.socket.write(r.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t){e.exports=require("coc.nvim")},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.TraceFormat=i.TraceFormat,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(18)),r(n(20)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);t.calculate=r.calculate},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),o=n(6),s=n(29),a=n(8);t.activate=e=>r(void 0,void 0,void 0,(function*(){const{subscriptions:t,logger:n}=e,u=i.workspace.getConfiguration("calc"),{nvim:c}=i.workspace;u.get("highlight",!0)&&c.command("highlight default link CocCalcFormule CocHighlightText",!0);const l=n.error.bind(n),f=new s.CalcProvider(u,l);function d(e){return r(this,void 0,void 0,(function*(){const t=yield i.workspace.document,n=yield i.workspace.getCursorPosition(),r=t.getline(n.line),s=r.indexOf("=",n.character-1),a=-1===s?r.length:s+1,u=r.slice(0,a),{newText:d,expressionWithEqualSignRange:h,expressionEndRange:p}=f.calculateLine(o.Position.create(n.line,a),u);if("append"===e){const e=u.trimRight().endsWith("=");t.applyEdits(c,[o.TextEdit.replace(p,e?d:" = "+d)]).catch(l)}else"replace"===e&&t.applyEdits(c,[o.TextEdit.replace(h,d)]).catch(l)}))}t.push(i.languages.registerCompletionItemProvider("calc","CALC",null,f,["="," "],u.get("priority",1e3)),i.workspace.registerAutocmd({event:["CursorMoved","CursorMovedI","InsertLeave"],callback:()=>{f.clearHighlight().catch(l)}}),i.commands.registerCommand("calc.calculate",e=>{try{return a.calculate(e).result}catch(e){return null}})),t.push(i.workspace.registerKeymap(["n","i"],"calc-result-append",()=>r(void 0,void 0,void 0,(function*(){yield d("append")}))),i.workspace.registerKeymap(["n","i"],"calc-result-replace",()=>r(void 0,void 0,void 0,(function*(){yield d("replace")}))))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(1);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=n(15),o=n(16),s=n(7),a=n(3),u=n(4);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let c=s.createServer(e=>{c.close(),n([new a.SocketMessageReader(e,t),new u.SocketMessageWriter(e,t)])});c.on("error",o),c.listen(e,()=>{c.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new u.SocketMessageWriter(n,t)]}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(3),o=n(4);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((a,u)=>{let c=r.createServer(e=>{c.close(),n([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});c.on("error",u),c.listen(e,"127.0.0.1",()=>{c.removeListener("error",u),a({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},function(e,t,n){var r,i,o;!function(s){if("object"==typeof e.exports){var a=s(n(19),t);void 0!==a&&(e.exports=a)}else i=[n,t],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o)}((function(e,t){"use strict";var n,r,i,o,s,a,u,c,l,f,d,h,p;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return R.objectLiteral(t)&&R.number(t.line)&&R.number(t.character)}}(n=t.Position||(t.Position={})),function(e){e.create=function(e,t,r,i){if(R.number(e)&&R.number(t)&&R.number(r)&&R.number(i))return{start:n.create(e,t),end:n.create(r,i)};if(n.is(e)&&n.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+r+", "+i+"]")},e.is=function(e){var t=e;return R.objectLiteral(t)&&n.is(t.start)&&n.is(t.end)}}(r=t.Range||(t.Range={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return R.defined(t)&&r.is(t.range)&&(R.string(t.uri)||R.undefined(t.uri))}}(i=t.Location||(t.Location={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return R.defined(t)&&r.is(t.targetRange)&&R.string(t.targetUri)&&(r.is(t.targetSelectionRange)||R.undefined(t.targetSelectionRange))&&(r.is(t.originSelectionRange)||R.undefined(t.originSelectionRange))}}(t.LocationLink||(t.LocationLink={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return R.number(t.red)&&R.number(t.green)&&R.number(t.blue)&&R.number(t.alpha)}}(o=t.Color||(t.Color={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return r.is(t.range)&&o.is(t.color)}}(t.ColorInformation||(t.ColorInformation={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return R.string(t.label)&&(R.undefined(t.textEdit)||c.is(t))&&(R.undefined(t.additionalTextEdits)||R.typedArray(t.additionalTextEdits,c.is))}}(t.ColorPresentation||(t.ColorPresentation={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return R.defined(n)&&(o.startCharacter=n),R.defined(r)&&(o.endCharacter=r),R.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return R.number(t.startLine)&&R.number(t.startLine)&&(R.undefined(t.startCharacter)||R.number(t.startCharacter))&&(R.undefined(t.endCharacter)||R.number(t.endCharacter))&&(R.undefined(t.kind)||R.string(t.kind))}}(t.FoldingRange||(t.FoldingRange={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return R.defined(t)&&i.is(t.location)&&R.string(t.message)}}(s=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(t.DiagnosticSeverity||(t.DiagnosticSeverity={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return R.defined(n)&&(s.severity=n),R.defined(r)&&(s.code=r),R.defined(i)&&(s.source=i),R.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return R.defined(t)&&r.is(t.range)&&R.string(t.message)&&(R.number(t.severity)||R.undefined(t.severity))&&(R.number(t.code)||R.string(t.code)||R.undefined(t.code))&&(R.string(t.source)||R.undefined(t.source))&&(R.undefined(t.relatedInformation)||R.typedArray(t.relatedInformation,s.is))}}(a=t.Diagnostic||(t.Diagnostic={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return R.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return R.defined(t)&&R.string(t.title)&&R.string(t.command)}}(u=t.Command||(t.Command={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return R.objectLiteral(t)&&R.string(t.newText)&&r.is(t.range)}}(c=t.TextEdit||(t.TextEdit={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return R.defined(t)&&g.is(t.textDocument)&&Array.isArray(t.edits)}}(l=t.TextDocumentEdit||(t.TextDocumentEdit={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&R.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||R.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||R.boolean(t.options.ignoreIfExists)))}}(f=t.CreateFile||(t.CreateFile={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&R.string(t.oldUri)&&R.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||R.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||R.boolean(t.options.ignoreIfExists)))}}(d=t.RenameFile||(t.RenameFile={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&R.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||R.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||R.boolean(t.options.ignoreIfNotExists)))}}(h=t.DeleteFile||(t.DeleteFile={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return R.string(e.kind)?f.is(e)||d.is(e)||h.is(e):l.is(e)})))}}(p=t.WorkspaceEdit||(t.WorkspaceEdit={}));var g,m,v,y,w=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(c.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(c.replace(e,t))},e.prototype.delete=function(e){this.edits.push(c.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),b=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(l.is(e)){var n=new w(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new w(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(g.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new w(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new w(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(f.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(d.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(h.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();t.WorkspaceChange=b,function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return R.defined(t)&&R.string(t.uri)}}(t.TextDocumentIdentifier||(t.TextDocumentIdentifier={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return R.defined(t)&&R.string(t.uri)&&(null===t.version||R.number(t.version))}}(g=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return R.defined(t)&&R.string(t.uri)&&R.string(t.languageId)&&R.number(t.version)&&R.string(t.text)}}(t.TextDocumentItem||(t.TextDocumentItem={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(m=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(m=t.MarkupKind||(t.MarkupKind={})),function(e){e.is=function(e){var t=e;return R.objectLiteral(e)&&m.is(t.kind)&&R.string(t.value)}}(v=t.MarkupContent||(t.MarkupContent={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(t.CompletionItemKind||(t.CompletionItemKind={})),function(e){e.PlainText=1,e.Snippet=2}(t.InsertTextFormat||(t.InsertTextFormat={})),function(e){e.create=function(e){return{label:e}}}(t.CompletionItem||(t.CompletionItem={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(t.CompletionList||(t.CompletionList={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return R.string(t)||R.objectLiteral(t)&&R.string(t.language)&&R.string(t.value)}}(y=t.MarkedString||(t.MarkedString={})),function(e){e.is=function(e){var t=e;return!!t&&R.objectLiteral(t)&&(v.is(t.contents)||y.is(t.contents)||R.typedArray(t.contents,y.is))&&(void 0===e.range||r.is(e.range))}}(t.Hover||(t.Hover={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(t.ParameterInformation||(t.ParameterInformation={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return R.defined(t)&&(i.documentation=t),R.defined(n)?i.parameters=n:i.parameters=[],i}}(t.SignatureInformation||(t.SignatureInformation={})),function(e){e.Text=1,e.Read=2,e.Write=3}(t.DocumentHighlightKind||(t.DocumentHighlightKind={})),function(e){e.create=function(e,t){var n={range:e};return R.number(t)&&(n.kind=t),n}}(t.DocumentHighlight||(t.DocumentHighlight={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(t.SymbolKind||(t.SymbolKind={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(t.SymbolInformation||(t.SymbolInformation={}));var E=function(){};t.DocumentSymbol=E,function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&R.string(t.name)&&R.number(t.kind)&&r.is(t.range)&&r.is(t.selectionRange)&&(void 0===t.detail||R.string(t.detail))&&(void 0===t.deprecated||R.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(E=t.DocumentSymbol||(t.DocumentSymbol={})),t.DocumentSymbol=E,function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(t.CodeActionKind||(t.CodeActionKind={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return R.defined(t)&&R.typedArray(t.diagnostics,a.is)&&(void 0===t.only||R.typedArray(t.only,R.string))}}(t.CodeActionContext||(t.CodeActionContext={})),function(e){e.create=function(e,t,n){var r={title:e};return u.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&R.string(t.title)&&(void 0===t.diagnostics||R.typedArray(t.diagnostics,a.is))&&(void 0===t.kind||R.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||u.is(t.command))&&(void 0===t.edit||p.is(t.edit))}}(t.CodeAction||(t.CodeAction={})),function(e){e.create=function(e,t){var n={range:e};return R.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return R.defined(t)&&r.is(t.range)&&(R.undefined(t.command)||u.is(t.command))}}(t.CodeLens||(t.CodeLens={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return R.defined(t)&&R.number(t.tabSize)&&R.boolean(t.insertSpaces)}}(t.FormattingOptions||(t.FormattingOptions={}));var x=function(){};t.DocumentLink=x,function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return R.defined(t)&&r.is(t.range)&&(R.undefined(t.target)||R.string(t.target))}}(x=t.DocumentLink||(t.DocumentLink={})),t.DocumentLink=x,t.EOL=["\n","\r\n","\r"],function(e){e.create=function(e,t,n,r){return new T(e,t,n,r)},e.is=function(e){var t=e;return!!(R.defined(t)&&R.string(t.uri)&&(R.undefined(t.languageId)||R.string(t.languageId))&&R.number(t.lineCount)&&R.func(t.getText)&&R.func(t.positionAt)&&R.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0;var i=t.slice(0,r);var o=t.slice(r);e(i,n);e(o,n);var s=0;var a=0;var u=0;for(;s<i.length&&a<o.length;){var c=n(i[s],o[a]);t[u++]=c<=0?i[s++]:o[a++]}for(;s<i.length;)t[u++]=i[s++];for(;a<o.length;)t[u++]=o[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),u=e.offsetAt(s.range.end);if(!(u<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(u,n.length),i=a}return n}}(t.TextDocument||(t.TextDocument={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var R,T=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,i=t.length;if(0===i)return n.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);t[o]>e?i=o:r=o+1}var s=r-1;return n.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(R||(R={}))}))},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=19},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(21),i=n(0),o=n(22);t.ImplementationRequest=o.ImplementationRequest;const s=n(23);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(24);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const u=n(25);t.ConfigurationRequest=u.ConfigurationRequest;const c=n(26);t.DocumentColorRequest=c.DocumentColorRequest,t.ColorPresentationRequest=c.ColorPresentationRequest;const l=n(27);t.FoldingRangeRequest=l.FoldingRangeRequest;const f=n(28);t.DeclarationRequest=f.DeclarationRequest,function(e){e.is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new i.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new i.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new i.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new i.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new i.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new i.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new i.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new i.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new i.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new i.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new i.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new i.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new i.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new i.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new i.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);!function(e){e.type=new r.RequestType("textDocument/declaration")}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),o=n(8),s=n(6);t.CalcProvider=class{constructor(e,t){this.config=e,this.onError=t,this.matchIds=new Set,this.srcId=i.workspace.createNameSpace("coc-calc"),this.enableActive=!1,this.enableDebug=this.config.get("debug",!1),this.enableReplaceOriginalExpression=this.config.get("replaceOriginalExpression",!0)}highlight(e){return r(this,void 0,void 0,(function*(){(yield i.workspace.document).highlightRanges([e],"CocCalcFormule",this.srcId).forEach(e=>this.matchIds.add(e))}))}clearHighlight(){return r(this,void 0,void 0,(function*(){(yield i.workspace.document).clearMatchIds(this.matchIds)}))}calculateLine(e,t){const{skip:n,result:r}=o.calculate(t),i=t.slice(n),a=i.match(/^\s+/),u=a?a[0].length:0,c=i.match(/[\s=]+$/),l=c?c[0].length:0;return{skip:n,result:r,newText:t.endsWith(" =")?" "+r:r,expressionRange:s.Range.create(e.line,n+u,e.line,e.character-l),expressionWithEqualSignRange:s.Range.create(e.line,n+u,e.line,e.character),expressionEndRange:s.Range.create(e.line,e.character,e.line,e.character)}}provideCompletionItems(e,t,n,o){return r(this,void 0,void 0,(function*(){const n=e.getText(s.Range.create(s.Position.create(t.line,0),t));if(!this.enableActive&&!n.trimRight().endsWith("="))return[];try{const{skip:e,expressionRange:r,expressionWithEqualSignRange:i,expressionEndRange:o,newText:a}=this.calculateLine(t,n);return this.clearHighlight().catch(this.onError),this.highlight(r).catch(this.onError),this.replacePosition=i,[{label:a,kind:s.CompletionItemKind.Constant,documentation:"`"+n.slice(e).trimLeft()+a+"`",textEdit:{range:o,newText:a}}]}catch(e){return this.enableDebug&&i.workspace.showMessage(e.message,"error"),[]}}))}resolveCompletionItem(e,t){return r(this,void 0,void 0,(function*(){return this.enableReplaceOriginalExpression&&(e.textEdit={range:this.replacePosition,newText:e.textEdit.newText.trim()}),e}))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(31)),o=n(32);t.BinaryExponentOptSyms=["**"],t.BinaryMulOptSyms=["%","*","/"],t.BinaryAddOptSyms=["+","-"],t.BinaryOptSyms=[...t.BinaryExponentOptSyms,...t.BinaryMulOptSyms,...t.BinaryAddOptSyms];t.BinaryExponentOptClass=class{},t.UnaryOptSyms=["+","-"],t.ConstSyms=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"];class s{constructor(){this.abs=[1],this.acos=[1],this.acosh=[1],this.add=[2],this.asin=[1],this.asinh=[1],this.atan=[1],this.atanh=[1],this.atan2=[2],this.cbrt=[1],this.ceil=[1],this.cos=[1],this.cosh=[1],this.div=[2],this.exp=[1],this.floor=[1],this.hypot=[1,1/0],this.ln=[1],this.log=[1,2],this.log2=[1],this.log10=[1],this.max=[1,1/0],this.min=[1,1/0],this.mod=[2],this.mul=[2],this.pow=[2],this.random=[0,1],this.round=[1],this.sign=[1],this.sin=[1],this.sinh=[1],this.sqrt=[1],this.sub=[2],this.tan=[1],this.tanh=[1],this.trunc=[1]}}t.FuncNameClass=s,t.FuncNameEnum=new s;class a{constructor(e){this.raw=e}}t.BinaryOpt=a;class u{constructor(){this.type=this.constructor.name}registerResult(e){Object.defineProperty(this,"result",{get:e,enumerable:!0})}}t.Node=u;class c extends u{constructor(e){super(),this.raw=e,this.registerResult(()=>new o.Decimal(this.raw.replace(/_/g,"")))}}t.Decimal=c;class l extends u{constructor(e){if(super(),this.raw=e,!t.ConstSyms.includes(this.raw))throw new Error(`Constant ${this.raw} not exists`);this.constSym=this.raw,this.registerResult(()=>new o.Decimal(Math[this.constSym]))}}t.Constant=l;class f extends u{constructor(e,n){if(super(),this.rawFuncName=e,this.args=n,!(this.rawFuncName in t.FuncNameEnum))throw new Error(`Function ${this.rawFuncName} not exists`);this.funcNameSym=this.rawFuncName,this.registerResult(()=>o.Decimal[this.funcNameSym](...n.map(e=>e.result)))}}t.FuncCall=f;class d extends u{constructor(e,t){super(),this.operators=e,this.value=t,this.registerResult(()=>"+"===this.operator?new o.Decimal(this.value.result):new o.Decimal(0).sub(this.value.result))}get operator(){return 1===this.operators.reduce((e,t)=>e*("+"===t?1:-1),1)?"+":"-"}}t.UnaryExpr=d;class h extends u{constructor(e,t,n){super(),this.left=e,this.operator=t,this.right=n,this.registerResult(()=>h.calculate(this))}static calculate(e){const t=e.left.result,n=e.right.result;return{"+":()=>t.add(n),"-":()=>t.minus(n),"*":()=>t.mul(n),"/":()=>t.div(n),"%":()=>t.modulo(n),"**":()=>t.pow(n)}[e.operator.raw]()}}t.BinaryExpr=h,t.whitespaceP=i.default.optWhitespace;const p=t.whitespaceP;t.leftParenthesisP=i.default.string("(").trim(p),t.rightParenthesisP=i.default.string(")").trim(p),t.ofStringArrayP=(...e)=>i.default.alt(...e.map(e=>i.default.string(e))),t.optionalParenthesisP=e=>i.default.alt(e,e.wrap(t.leftParenthesisP,t.rightParenthesisP),i.default.lazy(()=>t.optionalParenthesisP(e).wrap(t.leftParenthesisP,t.rightParenthesisP))),t.decimalP=i.default.regexp(/(\d[\d_]*(\.\d[\d_]*)?|(\.\d[\d_]*))(e[-+]?\d[\d_]*)?/).map(e=>new c(e)).desc("decimal"),t.includesP=e=>i.default.alt(...e.map(e=>i.default.string(e))),t.constantP=t.includesP(t.ConstSyms).map(e=>new l(e)).desc("constant"),t.funcNameP=t.includesP(Object.keys(t.FuncNameEnum)).desc("functionName"),t.funcCallP=i.default.lazy(()=>i.default.seq(t.funcNameP,i.default.sepBy(t.exprP,i.default.string(",").trim(p)).wrap(t.leftParenthesisP,t.rightParenthesisP)).map(([e,t])=>new f(e,t))).desc("functionCall"),t.atomicP=t.optionalParenthesisP(i.default.alt(t.funcCallP,t.constantP,t.decimalP)).desc("atomic"),t.unaryOptP=t.ofStringArrayP(...t.UnaryOptSyms).trim(p).desc("unaryOperator"),t.unaryExprP=i.default.lazy(()=>t.optionalParenthesisP(i.default.alt(i.default.seq(t.unaryOptP.many(),t.atomicP).map(([e,t])=>new d(e,t)),t.atomicP))).desc("unaryExpression"),t.binaryOptP=t.ofStringArrayP(...t.BinaryOptSyms).trim(p).map(e=>new a(e)).desc("binaryOperator"),t.binaryCalculate=(e,...n)=>{const r=[],i=[];r.unshift(e);const o=e=>{const t=[],n=[];for(;i.length&&e.includes(i[0].raw);)0===t.length&&t.unshift(r.shift()),n.unshift(i.shift()),t.unshift(r.shift());if(t.length>0){let e=t.shift();for(;n.length>0;){const r=n.shift(),i=t.shift();e=new h(e,r,i)}r.unshift(e)}},s=()=>{for(;i.length&&t.BinaryExponentOptSyms.includes(i[0].raw);){const e=i.shift(),t=r.shift(),n=r.shift();r.unshift(new h(n,e,t))}};for(;n.length>0;){const[e,a]=n.shift();t.BinaryExponentOptSyms.includes(e.raw)?(i.unshift(e),r.unshift(a)):t.BinaryMulOptSyms.includes(e.raw)?(s(),i.unshift(e),r.unshift(a)):t.BinaryAddOptSyms.includes(e.raw)&&(s(),o(t.BinaryMulOptSyms),i.unshift(e),r.unshift(a))}return s(),o(t.BinaryMulOptSyms),o(t.BinaryAddOptSyms),r.shift()},t.binaryOptExprP=i.default.lazy(()=>{const e=e=>i.default.alt(i.default.seq(t.unaryOptP.many(),e).map(([e,t])=>new d(e,t)),e),n=t.optionalParenthesisP(i.default.seqMap(i.default.alt(e(t.binaryOptExprP.wrap(t.leftParenthesisP,t.rightParenthesisP)),t.unaryExprP),i.default.seq(t.binaryOptP,i.default.alt(e(t.binaryOptExprP.wrap(t.leftParenthesisP,t.rightParenthesisP)),t.unaryExprP)).atLeast(1),(e,[...n])=>t.binaryCalculate(e,...n)));return e(n)}),t.exprP=i.default.alt(t.binaryOptExprP,t.unaryExprP).trim(p).desc("expression"),t.skipEqualSignP=i.default.string("=").trim(p).times(0,1),t.mainP=t.exprP.skip(t.skipEqualSignP).desc("main"),t.parse=e=>t.mainP.tryParse(e),t.printAst=e=>{const n=t.parse(e);console.log(JSON.stringify(n,null,2))};const g=(e,n,r=[],i)=>{try{return{skip:n,result:t.parse(e).result.valueOf()}}catch(t){if("ParsimmonError"===t.type&&e.length>0){const t=(e=>{const t=e.search(/\W/);return-1===t?e.length:t+1})(e),o=n+t;return g(e.slice(t),o,[...r,o],i)}const o=Array.from(Array(i.length)).map((e,t)=>r.includes(t)?"":" ").join("");throw new Error(["CalculateError:",i,o].join("\r\n"))}};t.calculate=e=>{const t=e.replace(/[=\s]*$/g,""),n=(e=>{const t=e.lastIndexOf("=");return-1===t?0:t+1})(t);return g(t.slice(n),n,[],e)}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._=e}var i=r.prototype;function o(e,t){for(var n=0;n<e;n++)t(n)}function s(e,t,n){return function(e,t){o(t.length,(function(n){e(t[n],n,t)}))}((function(n,r,i){t=e(t,n,r,i)}),n),t}function a(e,t){return s((function(t,n,r,i){return t.concat([e(n,r,i)])}),[],t)}function u(e){var t=s((function(e,t,n,r){return e.concat(n===r.length-1?Buffer.from([t,0]).readUInt16BE(0):r.readUInt16BE(n))}),[],e);return Buffer.from(a((function(e){return(e<<1&65535)>>8}),t))}function c(e){return e[0]>>7}function l(){return"undefined"!=typeof Buffer}function f(){if(!l())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function d(e){f();var t=s((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var n,i=t/8,a=(n=function(e){return e>48},s((function(e,t){return e||(n(t)?t:e)}),null,e));if(a)throw new Error(a+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(t,n){var r=i+n;return r>t.length?R(n,i.toString()+" bytes"):x(r,s((function(e,t){var n=function(e,t){var n={v:0,buf:t};return o(e,(function(){n={v:n.v<<1|c(n.buf),buf:u(n.buf)}})),n}(t,e.buf);return{coll:e.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:t.slice(n,r)},e).coll)}))}function h(e,t){return new r((function(n,r){return f(),r+t>n.length?R(r,t+" bytes for "+e):x(r+t,n.slice(r,r+t))}))}function p(e,t){if("number"!=typeof(n=t)||Math.floor(n)!==n||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var n}function g(e){return p("uintBE",e),h("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function m(e){return p("uintLE",e),h("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function v(e){return p("intBE",e),h("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function y(e){return p("intLE",e),h("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function w(e){return e instanceof r}function b(e){return"[object Array]"==={}.toString.call(e)}function E(e){return l()&&Buffer.isBuffer(e)}function x(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function R(e,t){return b(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function T(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var n=e.furthest===t.furthest?function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)n[t[i]]=!0;var o=[];for(var s in n)({}).hasOwnProperty.call(n,s)&&o.push(s);return o.sort(),o}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:n}}function _(e,t){if(E(e))return{offset:t,line:-1,column:-1};var n=e.slice(0,t).split("\n");return{offset:t,line:n.length,column:n[n.length-1].length+1}}function C(e){if(!w(e))throw new Error("not a parser: "+e)}function N(e,t){return"string"==typeof e?e.charAt(t):e[t]}function k(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function q(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function M(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var S=2,P=3,O=8,D=5*O,L=4*O,I="  ";function F(e,t){return new Array(t+1).join(e)}function j(e,t,n){var r=t-e.length;return r<=0?e:F(n,r)+e}function A(e,t,n,r){return{from:e-t>0?e-t:0,to:e+n>r?r:e+n}}function W(e,t){var n,r,i,o,u,c=t.index,l=c.offset,f=1;if(l===e.length)return"Got the end of the input";if(E(e)){var d=l-l%O,h=l-d,p=A(d,D,L+O,e.length),g=a((function(e){return a((function(e){return j(e.toString(16),2,"0")}),e)}),function(e,t){var n=e.length,r=[],i=0;if(n<=t)return[e.slice()];for(var o=0;o<n;o++)r[i]||r.push([]),r[i].push(e[o]),(o+1)%t==0&&i++;return r}(e.slice(p.from,p.to).toJSON().data,O));o=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/O,to:Math.floor(e.to/O)}}(p),r=d/O,n=3*h,h>=4&&(n+=1),f=2,i=a((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),g),(u=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(u=2)}else{var m=e.split(/\r\n|[\n\r\u2028\u2029]/);n=c.column-1,r=c.line-1,o=A(r,S,P,m.length),i=m.slice(o.from,o.to),u=o.to.toString().length}var v=r-o.from;return E(e)&&(u=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(u=2),s((function(t,r,i){var s,a=i===v,c=a?"> ":I;return s=E(e)?j((8*(o.from+i)).toString(16),u,"0"):j((o.from+i+1).toString(),u," "),[].concat(t,[c+s+" | "+r],a?[I+F(" ",u)+" | "+j("",n," ")+F("^",f)]:[])}),[],i).join("\n")}function B(e,t){return["\n","-- PARSING FAILED "+F("-",50),"\n\n",W(e,t),"\n\n",(n=t.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function $(e){var t=""+e;return t.slice(t.lastIndexOf("/")+1)}function U(){for(var e=[].slice.call(arguments),t=e.length,n=0;n<t;n+=1)C(e[n]);return r((function(n,r){for(var i,o=new Array(t),s=0;s<t;s+=1){if(!(i=T(e[s]._(n,r),i)).status)return i;o[s]=i.value,r=i.index}return T(x(r,o),i)}))}function z(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return q(t),U.apply(null,e).map((function(e){return t.apply(null,e)}))}function H(){var e=[].slice.call(arguments),t=e.length;if(0===t)return Q("zero alternates");for(var n=0;n<t;n+=1)C(e[n]);return r((function(t,n){for(var r,i=0;i<e.length;i+=1)if((r=T(e[i]._(t,n),r)).status)return r;return r}))}function K(e,t){return V(e,t).or(G([]))}function V(e,t){return C(e),C(t),z(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function J(e){M(e);var t="'"+e+"'";return r((function(n,r){var i=r+e.length,o=n.slice(r,i);return o===e?x(i,o):R(r,t)}))}function Z(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=$(e),n=0;n<t.length;n++){var r=t.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r)throw new Error('unsupported regexp flag "'+r+'": '+e)}}(e),arguments.length>=2?k(t):t=0;var n=function(e){return RegExp("^(?:"+e.source+")",$(e))}(e),i=""+e;return r((function(e,r){var o=n.exec(e.slice(r));if(o){if(0<=t&&t<=o.length){var s=o[0],a=o[t];return x(r+s.length,a)}return R(r,"valid match group (0 to "+o.length+") in "+i)}return R(r,i)}))}function G(e){return r((function(t,n){return x(n,e)}))}function Q(e){return r((function(t,n){return R(n,e)}))}function X(e){if(w(e))return r((function(t,n){var r=e._(t,n);return r.index=n,r.value="",r}));if("string"==typeof e)return X(J(e));if(e instanceof RegExp)return X(Z(e));throw new Error("not a string, regexp, or parser: "+e)}function Y(e){return C(e),r((function(t,n){var r=e._(t,n),i=t.slice(n,r.index);return r.status?R(n,'not "'+i+'"'):x(n,null)}))}function ee(e){return q(e),r((function(t,n){var r=N(t,n);return n<t.length&&e(r)?x(n+1,r):R(n,"a character/byte matching "+e)}))}function te(e,t){arguments.length<2&&(t=e,e=void 0);var n=r((function(e,r){return n._=t()._,n._(e,r)}));return e?n.desc(e):n}function ne(){return Q("fantasy-land/empty")}i.parse=function(e){if("string"!=typeof e&&!E(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t=this.skip(se)._(e,0);return t.status?{status:!0,value:t.value}:{status:!1,index:_(e,t.furthest),expected:t.expected}},i.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var n=B(e,t),r=new Error(n);throw r.type="ParsimmonError",r.result=t,r},i.assert=function(e,t){return this.chain((function(n){return e(n)?G(n):Q(t)}))},i.or=function(e){return H(this,e)},i.trim=function(e){return this.wrap(e,e)},i.wrap=function(e,t){return z(e,this,t,(function(e,t){return t}))},i.thru=function(e){return e(this)},i.then=function(e){return C(e),U(this,e).map((function(e){return e[1]}))},i.many=function(){var e=this;return r((function(t,n){for(var r=[],i=void 0;;){if(!(i=T(e._(t,n),i)).status)return T(x(n,r),i);if(n===i.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=i.index,r.push(i.value)}}))},i.tieWith=function(e){return M(e),this.map((function(t){if(function(e){if(!b(e))throw new Error("not an array: "+e)}(t),t.length){M(t[0]);for(var n=t[0],r=1;r<t.length;r++)M(t[r]),n+=e+t[r];return n}return""}))},i.tie=function(){return this.tieWith("")},i.times=function(e,t){var n=this;return arguments.length<2&&(t=e),k(e),k(t),r((function(r,i){for(var o=[],s=void 0,a=void 0,u=0;u<e;u+=1){if(a=T(s=n._(r,i),a),!s.status)return a;i=s.index,o.push(s.value)}for(;u<t&&(a=T(s=n._(r,i),a),s.status);u+=1)i=s.index,o.push(s.value);return T(x(i,o),a)}))},i.result=function(e){return this.map((function(){return e}))},i.atMost=function(e){return this.times(0,e)},i.atLeast=function(e){return z(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},i.map=function(e){q(e);var t=this;return r((function(n,r){var i=t._(n,r);return i.status?T(x(i.index,e(i.value)),i):i}))},i.contramap=function(e){q(e);var t=this;return r((function(n,r){var i=t.parse(e(n.slice(r)));return i.status?x(r+n.length,i.value):i}))},i.promap=function(e,t){return q(e),q(t),this.contramap(e).map(t)},i.skip=function(e){return U(this,e).map((function(e){return e[0]}))},i.mark=function(){return z(re,this,re,(function(e,t,n){return{start:e,value:t,end:n}}))},i.node=function(e){return z(re,this,re,(function(t,n,r){return{name:e,value:n,start:t,end:r}}))},i.sepBy=function(e){return K(this,e)},i.sepBy1=function(e){return V(this,e)},i.lookahead=function(e){return this.skip(X(e))},i.notFollowedBy=function(e){return this.skip(Y(e))},i.desc=function(e){b(e)||(e=[e]);var t=this;return r((function(n,r){var i=t._(n,r);return i.status||(i.expected=e),i}))},i.fallback=function(e){return this.or(G(e))},i.ap=function(e){return z(e,this,(function(e,t){return e(t)}))},i.chain=function(e){var t=this;return r((function(n,r){var i=t._(n,r);return i.status?T(e(i.value)._(n,i.index),i):i}))},i.concat=i.or,i.empty=ne,i.of=G,i["fantasy-land/ap"]=i.ap,i["fantasy-land/chain"]=i.chain,i["fantasy-land/concat"]=i.concat,i["fantasy-land/empty"]=i.empty,i["fantasy-land/of"]=i.of,i["fantasy-land/map"]=i.map;var re=r((function(e,t){return x(t,_(e,t))})),ie=r((function(e,t){return t>=e.length?R(t,"any character/byte"):x(t+1,N(e,t))})),oe=r((function(e,t){return x(e.length,e.slice(t))})),se=r((function(e,t){return t<e.length?R(t,"EOF"):x(t,null)})),ae=Z(/[0-9]/).desc("a digit"),ue=Z(/[0-9]*/).desc("optional digits"),ce=Z(/[a-z]/i).desc("a letter"),le=Z(/[a-z]*/i).desc("optional letters"),fe=Z(/\s*/).desc("optional whitespace"),de=Z(/\s+/).desc("whitespace"),he=J("\r"),pe=J("\n"),ge=J("\r\n"),me=H(ge,pe,he).desc("newline"),ve=H(me,se);r.all=oe,r.alt=H,r.any=ie,r.cr=he,r.createLanguage=function(e){var t={};for(var n in e)({}).hasOwnProperty.call(e,n)&&function(n){t[n]=te((function(){return e[n](t)}))}(n);return t},r.crlf=ge,r.custom=function(e){return r(e(x,R))},r.digit=ae,r.digits=ue,r.empty=ne,r.end=ve,r.eof=se,r.fail=Q,r.formatError=B,r.index=re,r.isParser=w,r.lazy=te,r.letter=ce,r.letters=le,r.lf=pe,r.lookahead=X,r.makeFailure=R,r.makeSuccess=x,r.newline=me,r.noneOf=function(e){return ee((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},r.notFollowedBy=Y,r.of=G,r.oneOf=function(e){for(var t=e.split(""),n=0;n<t.length;n++)t[n]="'"+t[n]+"'";return ee((function(t){return e.indexOf(t)>=0})).desc(t)},r.optWhitespace=fe,r.Parser=r,r.range=function(e,t){return ee((function(n){return e<=n&&n<=t})).desc(e+"-"+t)},r.regex=Z,r.regexp=Z,r.sepBy=K,r.sepBy1=V,r.seq=U,r.seqMap=z,r.seqObj=function(){for(var e,t={},n=0,i=(e=arguments,Array.prototype.slice.call(e)),o=i.length,s=0;s<o;s+=1){var a=i[s];if(!w(a)){if(b(a))if(2===a.length&&"string"==typeof a[0]&&w(a[1])){var u=a[0];if(Object.prototype.hasOwnProperty.call(t,u))throw new Error("seqObj: duplicate key "+u);t[u]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return r((function(e,t){for(var n,r={},s=0;s<o;s+=1){var a,u;if(b(i[s])?(a=i[s][0],u=i[s][1]):(a=null,u=i[s]),!(n=T(u._(e,t),n)).status)return n;a&&(r[a]=n.value),t=n.index}return T(x(t,r),n)}))},r.string=J,r.succeed=G,r.takeWhile=function(e){return q(e),r((function(t,n){for(var r=n;r<t.length&&e(N(t,r));)r++;return x(r,t.slice(n,r))}))},r.test=ee,r.whitespace=de,r["fantasy-land/empty"]=ne,r["fantasy-land/of"]=G,r.Binary={bitSeq:d,bitSeqObj:function(e){f();var t={},n=0,r=a((function(e){if(b(e)){var r=e;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(M(r[0]),k(r[1]),Object.prototype.hasOwnProperty.call(t,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return t[r[0]]=!0,n++,r}return k(e),[null,e]}),e);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var i=a((function(e){return e[0]}),r);return d(a((function(e){return e[1]}),r)).map((function(e){return s((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},a((function(t,n){return[t,e[n]]}),i))}))},byte:function(e){if(f(),k(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return r((function(n,r){var i=N(n,r);return i===e?x(r+1,i):R(r,t)}))},buffer:function(e){return h("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,t){return h("string",t).map((function(t){return t.toString(e)}))},uintBE:g,uint8BE:g(1),uint16BE:g(2),uint32BE:g(4),uintLE:m,uint8LE:m(1),uint16LE:m(2),uint32LE:m(4),intBE:v,int8BE:v(1),int16BE:v(2),int32BE:v(4),intLE:y,int8LE:y(1),int16LE:y(2),int32LE:y(4),floatBE:h("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:h("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:h("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:h("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=r},function(e,t,n){var r;!function(i){"use strict";var o,s,a,u=9e15,c=1e9,l="0123456789abcdef",f="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},p=!0,g="[DecimalError] ",m=g+"Invalid argument: ",v=g+"Precision limit exceeded",y=g+"crypto unavailable",w=Math.floor,b=Math.pow,E=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,R=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,T=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_=1e7,C=7,N=f.length-1,k=d.length-1,q={name:"[object Decimal]"};function M(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",(n=C-r.length)&&(o+=B(n)),o+=r;s=e[t],(n=C-(r=s+"").length)&&(o+=B(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function S(e,t,n){if(e!==~~e||e<t||e>n)throw Error(m+e)}function P(e,t,n,r){var i,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=C,i=0):(i=Math.ceil((t+1)/C),t%=C),o=b(10,C-t),a=e[i]%o|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),s=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==b(10,t-2)-1||(a==o/2||0==a)&&0==(e[i+1]/o/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),s=(r||n<4)&&9999==a||!r&&n>3&&4999==a):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==b(10,t-3)-1,s}function O(e,t,n){for(var r,i,o=[0],s=0,a=e.length;s<a;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=l.indexOf(e.charAt(s++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}q.absoluteValue=q.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),L(e)},q.ceil=function(){return L(new this.constructor(this),this.e+1,2)},q.comparedTo=q.cmp=function(e){var t,n,r,i,o=this,s=o.d,a=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!s||!a)return u&&c?u!==c?u:s===a?0:!s^u<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?u:a[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(t=0,n=(r=s.length)<(i=a.length)?r:i;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},q.cosine=q.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+C,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?(n=Math.ceil(i/3),r=(1/Q(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=G(e,1,t.times(r),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,X(r,n)),r.precision=e,r.rounding=t,L(2==a||3==a?n.neg():n,e,t,!0)):new r(1):new r(NaN)},q.cubeRoot=q.cbrt=function(){var e,t,n,r,i,o,s,a,u,c,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(p=!1,(o=l.s*b(l.s*l,1/3))&&Math.abs(o)!=1/0?r=new f(o.toString()):(n=M(l.d),(o=((e=l.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=b(n,1/3),e=w((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),s=(e=f.precision)+3;;)if(c=(u=(a=r).times(a).times(a)).plus(l),r=D(c.plus(l).times(a),c.plus(u),s+2,1),M(a.d).slice(0,s)===(n=M(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(L(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(L(a,e+1,0),a.times(a).times(a).eq(l))){r=a;break}s+=4,i=1}return p=!0,L(r,e,f.rounding,t)},q.decimalPlaces=q.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-w(this.e/C))*C,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},q.dividedBy=q.div=function(e){return D(this,new this.constructor(e))},q.dividedToIntegerBy=q.divToInt=function(e){var t=this.constructor;return L(D(this,new t(e),0,1,1),t.precision,t.rounding)},q.equals=q.eq=function(e){return 0===this.cmp(e)},q.floor=function(){return L(new this.constructor(this),this.e+1,3)},q.greaterThan=q.gt=function(e){return this.cmp(e)>0},q.greaterThanOrEqualTo=q.gte=function(e){var t=this.cmp(e);return 1==t||0===t},q.hyperbolicCosine=q.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=G(s,1,o.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return L(o,s.precision=n,s.rounding=r,!0)},q.hyperbolicSine=q.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=G(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=G(o,2,i=i.times(1/Q(5,e)),i,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);e--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=t,o.rounding=n,L(i,t,n,!0)},q.hyperbolicTangent=q.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,D(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},q.inverseCosine=q.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?A(n,i,o):new n(0):new n(NaN):t.isZero()?A(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=A(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},q.inverseHyperbolicCosine=q.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,p=!1,n=n.times(n).minus(1).sqrt().plus(n),p=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},q.inverseHyperbolicSine=q.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,p=!1,n=n.times(n).plus(1).sqrt().plus(n),p=!0,r.precision=e,r.rounding=t,n.ln())},q.inverseHyperbolicTangent=q.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?L(new o(i),e,t,!0):(o.precision=n=r-i.e,i=D(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},q.inverseSine=q.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=A(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},q.inverseTangent=q.atan=function(){var e,t,n,r,i,o,s,a,u,c=this,l=c.constructor,f=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&f+4<=k)return(s=A(l,f+4,d).times(.25)).s=c.s,s}else{if(!c.s)return new l(NaN);if(f+4<=k)return(s=A(l,f+4,d).times(.5)).s=c.s,s}for(l.precision=a=f+10,l.rounding=1,e=n=Math.min(28,a/C+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(p=!1,t=Math.ceil(a/C),r=1,u=c.times(c),s=new l(c),i=c;-1!==e;)if(i=i.times(u),o=s.minus(i.div(r+=2)),i=i.times(u),void 0!==(s=o.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),p=!0,L(s,l.precision=f,l.rounding=d,!0)},q.isFinite=function(){return!!this.d},q.isInteger=q.isInt=function(){return!!this.d&&w(this.e/C)>this.d.length-2},q.isNaN=function(){return!this.s},q.isNegative=q.isNeg=function(){return this.s<0},q.isPositive=q.isPos=function(){return this.s>0},q.isZero=function(){return!!this.d&&0===this.d[0]},q.lessThan=q.lt=function(e){return this.cmp(e)<0},q.lessThanOrEqualTo=q.lte=function(e){return this.cmp(e)<1},q.logarithm=q.log=function(e){var t,n,r,i,o,s,a,u,c=this.constructor,l=c.precision,f=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(p=!1,s=K(this,a=l+5),r=t?j(c,a+10):K(e,a),P((u=D(s,r,a,1)).d,i=l,f))do{if(s=K(this,a+=10),r=t?j(c,a+10):K(e,a),u=D(s,r,a,1),!o){+M(u.d).slice(i+1,i+15)+1==1e14&&(u=L(u,l+1,0));break}}while(P(u.d,i+=10,f));return p=!0,L(u,l,f)},q.minus=q.sub=function(e){var t,n,r,i,o,s,a,u,c,l,f,d,h=this,g=h.constructor;if(e=new g(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new g(e.d||h.s!==e.s?h:NaN):e=new g(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(c=h.d,d=e.d,a=g.precision,u=g.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new g(3===u?-0:0);e=new g(h)}return p?L(e,a,u):e}if(n=w(e.e/C),l=w(h.e/C),c=c.slice(),o=l-n){for((f=o<0)?(t=c,o=-o,s=d.length):(t=d,n=l,s=c.length),o>(r=Math.max(Math.ceil(a/C),s)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((f=(r=c.length)<(s=d.length))&&(s=r),r=0;r<s;r++)if(c[r]!=d[r]){f=c[r]<d[r];break}o=0}for(f&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,r=d.length-s;r>0;--r)c[s++]=0;for(r=d.length;r>o;){if(c[--r]<d[r]){for(i=r;i&&0===c[--i];)c[i]=_-1;--c[i],c[r]+=_}c[r]-=d[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=F(c,n),p?L(e,a,u):e):new g(3===u?-0:0)},q.modulo=q.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?L(new r(n),r.precision,r.rounding):(p=!1,9==r.modulo?(t=D(n,e.abs(),0,3,1)).s*=e.s:t=D(n,e,0,r.modulo,1),t=t.times(e),p=!0,n.minus(t))},q.naturalExponential=q.exp=function(){return H(this)},q.naturalLogarithm=q.ln=function(){return K(this)},q.negated=q.neg=function(){var e=new this.constructor(this);return e.s=-e.s,L(e)},q.plus=q.add=function(e){var t,n,r,i,o,s,a,u,c,l,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new d(e.d||f.s===e.s?f:NaN)):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(c=f.d,l=e.d,a=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(f)),p?L(e,a,u):e;if(o=w(f.e/C),r=w(e.e/C),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,s=l.length):(n=l,r=o,s=c.length),i>(s=(o=Math.ceil(a/C))>s?o+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,n=l,l=c,c=n),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/_|0,c[i]%=_;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=F(c,r),p?L(e,a,u):e},q.precision=q.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(m+e);return n.d?(t=W(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},q.round=function(){var e=this,t=e.constructor;return L(new t(e),e.e+1,t.rounding)},q.sine=q.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+C,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return G(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Q(5,n)),t=G(e,2,t,t);for(var i,o=new e(5),s=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(a))));return t}(r,X(r,n)),r.precision=e,r.rounding=t,L(a>2?n.neg():n,e,t,!0)):new r(NaN)},q.squareRoot=q.sqrt=function(){var e,t,n,r,i,o,s=this,a=s.d,u=s.e,c=s.s,l=s.constructor;if(1!==c||!a||!a[0])return new l(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(p=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=M(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=w((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;)if(r=(o=r).plus(D(s,o,n+2,1)).times(.5),M(o.d).slice(0,n)===(t=M(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(L(r,u+1,1),e=!r.times(r).eq(s));break}if(!i&&(L(o,u+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}return p=!0,L(r,u,l.rounding,e)},q.tangent=q.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=D(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,L(2==a||4==a?n.neg():n,e,t,!0)):new r(NaN)},q.times=q.mul=function(e){var t,n,r,i,o,s,a,u,c,l=this,f=l.constructor,d=l.d,h=(e=new f(e)).d;if(e.s*=l.s,!(d&&d[0]&&h&&h[0]))return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:d&&h?0*e.s:e.s/0);for(n=w(l.e/C)+w(e.e/C),(u=d.length)<(c=h.length)&&(o=d,d=h,h=o,s=u,u=c,c=s),o=[],r=s=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)a=o[i]+h[r]*d[i-r-1]+t,o[i--]=a%_|0,t=a/_|0;o[i]=(o[i]+t)%_|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=F(o,n),p?L(e,f.precision,f.rounding):e},q.toBinary=function(e,t){return Y(this,2,e,t)},q.toDecimalPlaces=q.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(S(e,0,c),void 0===t?t=r.rounding:S(t,0,8),L(n,e+n.e+1,t))},q.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=I(r,!0):(S(e,0,c),void 0===t?t=i.rounding:S(t,0,8),n=I(r=L(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},q.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=I(i):(S(e,0,c),void 0===t?t=o.rounding:S(t,0,8),n=I(r=L(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},q.toFraction=function(e){var t,n,r,i,o,s,a,u,c,l,f,d,h=this,g=h.d,v=h.constructor;if(!g)return new v(h);if(c=n=new v(1),r=u=new v(0),s=(o=(t=new v(r)).e=W(g)-h.e-1)%C,t.d[0]=b(10,s<0?C+s:s),null==e)e=o>0?t:c;else{if(!(a=new v(e)).isInt()||a.lt(c))throw Error(m+a);e=a.gt(t)?o>0?t:c:a}for(p=!1,a=new v(M(g)),l=v.precision,v.precision=o=g.length*C*2;f=D(a,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=D(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=h.s,d=D(c,r,o,1).minus(h).abs().cmp(D(u,n,o,1).minus(h).abs())<1?[c,r]:[u,n],v.precision=l,p=!0,d},q.toHexadecimal=q.toHex=function(e,t){return Y(this,16,e,t)},q.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:S(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(p=!1,n=D(n,e,0,t,1).times(e),p=!0,L(n)):(e.s=n.s,n=e),n},q.toNumber=function(){return+this},q.toOctal=function(e,t){return Y(this,8,e,t)},q.toPower=q.pow=function(e){var t,n,r,i,o,s,a=this,u=a.constructor,c=+(e=new u(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new u(b(+a,c));if((a=new u(a)).eq(1))return a;if(r=u.precision,o=u.rounding,e.eq(1))return L(a,r,o);if((t=w(e.e/C))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=$(u,a,n,r),e.s<0?new u(1).div(i):L(i,r,o);if((s=a.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(t=0!=(n=b(+a,c))&&isFinite(n)?new u(n+"").e:w(c*(Math.log("0."+M(a.d))/Math.LN10+a.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(p=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=H(e.times(K(a,r+n)),r)).d&&P((i=L(i,r+5,1)).d,r,o)&&(t=r+10,+M((i=L(H(e.times(K(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=L(i,r+1,0))),i.s=s,p=!0,u.rounding=o,L(i,r,o))},q.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=I(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(S(e,1,c),void 0===t?t=i.rounding:S(t,0,8),n=I(r=L(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},q.toSignificantDigits=q.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(S(e,1,c),void 0===t?t=n.rounding:S(t,0,8)),L(new n(this),e,t)},q.toString=function(){var e=this,t=e.constructor,n=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},q.truncated=q.trunc=function(){return L(new this.constructor(this),this.e+1,1)},q.valueOf=q.toJSON=function(){var e=this,t=e.constructor,n=I(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var D=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a,u,c){var l,f,d,h,p,g,m,v,y,b,E,x,R,T,N,k,q,M,S,P,O=r.constructor,D=r.s==i.s?1:-1,I=r.d,F=i.d;if(!(I&&I[0]&&F&&F[0]))return new O(r.s&&i.s&&(I?!F||I[0]!=F[0]:F)?I&&0==I[0]||!F?0*D:D/0:NaN);for(c?(p=1,f=r.e-i.e):(c=_,p=C,f=w(r.e/p)-w(i.e/p)),S=F.length,q=I.length,b=(y=new O(D)).d=[],d=0;F[d]==(I[d]||0);d++);if(F[d]>(I[d]||0)&&f--,null==o?(T=o=O.precision,a=O.rounding):T=u?o+(r.e-i.e)+1:o,T<0)b.push(1),g=!0;else{if(T=T/p+2|0,d=0,1==S){for(h=0,F=F[0],T++;(d<q||h)&&T--;d++)N=h*c+(I[d]||0),b[d]=N/F|0,h=N%F|0;g=h||d<q}else{for((h=c/(F[0]+1)|0)>1&&(F=e(F,h,c),I=e(I,h,c),S=F.length,q=I.length),k=S,x=(E=I.slice(0,S)).length;x<S;)E[x++]=0;(P=F.slice()).unshift(0),M=F[0],F[1]>=c/2&&++M;do{h=0,(l=t(F,E,S,x))<0?(R=E[0],S!=x&&(R=R*c+(E[1]||0)),(h=R/M|0)>1?(h>=c&&(h=c-1),1==(l=t(m=e(F,h,c),E,v=m.length,x=E.length))&&(h--,n(m,S<v?P:F,v,c))):(0==h&&(l=h=1),m=F.slice()),(v=m.length)<x&&m.unshift(0),n(E,m,x,c),-1==l&&(l=t(F,E,S,x=E.length))<1&&(h++,n(E,S<x?P:F,x,c)),x=E.length):0===l&&(h++,E=[0]),b[d++]=h,l&&E[0]?E[x++]=I[k]||0:(E=[I[k]],x=1)}while((k++<q||void 0!==E[0])&&T--);g=void 0!==E[0]}b[0]||b.shift()}if(1==p)y.e=f,s=g;else{for(d=1,h=b[0];h>=10;h/=10)d++;y.e=d+f*p-1,L(y,u?o+y.e+1:o,a,g)}return y}}();function L(e,t,n,r){var i,o,s,a,u,c,l,f,d,h=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,a=f[0];a>=10;a/=10)i++;if((o=t-i)<0)o+=C,s=t,u=(l=f[d=0])/b(10,i-s-1)%10|0;else if((d=Math.ceil((o+1)/C))>=(a=f.length)){if(!r)break e;for(;a++<=d;)f.push(0);l=u=0,i=1,s=(o%=C)-C+1}else{for(l=a=f[d],i=1;a>=10;a/=10)i++;u=(s=(o%=C)-C+i)<0?0:l/b(10,i-s-1)%10|0}if(r=r||t<0||void 0!==f[d+1]||(s<0?l:l%b(10,i-s-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?s>0?l/b(10,i-s):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,c?(t-=e.e+1,f[0]=b(10,(C-t%C)%C),e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=d,a=1,d--):(f.length=d+1,a=b(10,C-o),f[d]=s>0?(l/b(10,i-s)%b(10,s)|0)*a:0),c)for(;;){if(0==d){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,f[0]==_&&(f[0]=1));break}if(f[d]+=a,f[d]!=_)break;f[d--]=0,a=1}for(o=f.length;0===f[--o];)f.pop()}return p&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function I(e,t,n){if(!e.isFinite())return V(e);var r,i=e.e,o=M(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+B(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+B(-i-1)+o,n&&(r=n-s)>0&&(o+=B(r))):i>=s?(o+=B(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+B(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=B(r))),o}function F(e,t){var n=e[0];for(t*=C;n>=10;n/=10)t++;return t}function j(e,t,n){if(t>N)throw p=!0,n&&(e.precision=n),Error(v);return L(new e(f),t,1,!0)}function A(e,t,n){if(t>k)throw Error(v);return L(new e(d),t,n,!0)}function W(e){var t=e.length-1,n=t*C+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function B(e){for(var t="";e--;)t+="0";return t}function $(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/C+4);for(p=!1;;){if(n%2&&ee((o=o.times(t)).d,s)&&(i=!0),0===(n=w(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}ee((t=t.times(t)).d,s)}return p=!0,o}function U(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function H(e,t){var n,r,i,o,s,a,u,c=0,l=0,f=0,d=e.constructor,h=d.rounding,g=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(p=!1,u=g):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(u+=r=Math.log(b(2,f))/Math.LN10*2+5|0,n=o=s=new d(1),d.precision=u;;){if(o=L(o.times(e),u,1),n=n.times(++l),M((a=s.plus(D(o,n,u,1))).d).slice(0,u)===M(s.d).slice(0,u)){for(i=f;i--;)s=L(s.times(s),u,1);if(null!=t)return d.precision=g,s;if(!(c<3&&P(s.d,u-r,h,c)))return L(s,d.precision=g,h,p=!0);d.precision=u+=10,n=o=a=new d(1),l=0,c++}s=a}}function K(e,t){var n,r,i,o,s,a,u,c,l,f,d,h=1,g=e,m=g.d,v=g.constructor,y=v.rounding,w=v.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new v(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==t?(p=!1,l=w):l=t,v.precision=l+=10,r=(n=M(m)).charAt(0),!(Math.abs(o=g.e)<15e14))return c=j(v,l+2,w).times(o+""),g=K(new v(r+"."+n.slice(1)),l-10).plus(c),v.precision=w,null==t?L(g,w,y,p=!0):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=M((g=g.times(e)).d)).charAt(0),h++;for(o=g.e,r>1?(g=new v("0."+n),o++):g=new v(r+"."+n.slice(1)),f=g,u=s=g=D(g.minus(1),g.plus(1),l,1),d=L(g.times(g),l,1),i=3;;){if(s=L(s.times(d),l,1),M((c=u.plus(D(s,new v(i),l,1))).d).slice(0,l)===M(u.d).slice(0,l)){if(u=u.times(2),0!==o&&(u=u.plus(j(v,l+2,w).times(o+""))),u=D(u,new v(h),l,1),null!=t)return v.precision=w,u;if(!P(u.d,l-10,y,a))return L(u,v.precision=w,y,p=!0);v.precision=l+=10,c=s=g=D(f.minus(1),f.plus(1),l,1),d=L(g.times(g),l,1),i=a=1}u=c,i+=2}}function V(e){return String(e.s*e.s/0)}function J(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%C,n<0&&(r+=C),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=C;r<i;)e.d.push(+t.slice(r,r+=C));t=t.slice(r),r=C-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),p&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Z(e,t){var n,r,i,s,a,u,c,l,f;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(x.test(t))n=16,t=t.toLowerCase();else if(E.test(t))n=2;else{if(!R.test(t))throw Error(m+t);n=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),a=(s=t.indexOf("."))>=0,r=e.constructor,a&&(s=(u=(t=t.replace(".","")).length)-s,i=$(r,new r(n),s,2*s)),s=f=(l=O(t,n,_)).length-1;0===l[s];--s)l.pop();return s<0?new r(0*e.s):(e.e=F(l,f),e.d=l,p=!1,a&&(e=D(e,i,4*u)),c&&(e=e.times(Math.abs(c)<54?b(2,c):o.pow(2,c))),p=!0,e)}function G(e,t,n,r,i){var o,s,a,u,c=e.precision,l=Math.ceil(c/C);for(p=!1,u=n.times(n),a=new e(r);;){if(s=D(a.times(u),new e(t++*t++),c,1),a=i?r.plus(s):r.minus(s),r=D(s.times(u),new e(t++*t++),c,1),void 0!==(s=a.plus(r)).d[l]){for(o=l;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=s,s=o,0}return p=!0,s.d.length=l+1,s}function Q(e,t){for(var n=e;--t;)n*=e;return n}function X(e,t){var n,r=t.s<0,i=A(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return a=r?4:1,t;if((n=t.divToInt(i)).isZero())a=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return a=U(n)?r?2:3:r?4:1,t;a=U(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Y(e,t,n,r){var i,o,a,u,f,d,h,p,g,m=e.constructor,v=void 0!==n;if(v?(S(n,1,c),void 0===r?r=m.rounding:S(r,0,8)):(n=m.precision,r=m.rounding),e.isFinite()){for(v?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(a=(h=I(e)).indexOf("."))>=0&&(h=h.replace(".",""),(g=new m(1)).e=h.length-a,g.d=O(I(g),10,i),g.e=g.d.length),o=f=(p=O(h,10,i)).length;0==p[--f];)p.pop();if(p[0]){if(a<0?o--:((e=new m(e)).d=p,e.e=o,p=(e=D(e,g,n,r,0,i)).d,o=e.e,d=s),a=p[n],u=i/2,d=d||void 0!==p[n+1],d=r<4?(void 0!==a||d)&&(0===r||r===(e.s<0?3:2)):a>u||a===u&&(4===r||d||6===r&&1&p[n-1]||r===(e.s<0?8:7)),p.length=n,d)for(;++p[--n]>i-1;)p[n]=0,n||(++o,p.unshift(1));for(f=p.length;!p[f-1];--f);for(a=0,h="";a<f;a++)h+=l.charAt(p[a]);if(v){if(f>1)if(16==t||8==t){for(a=16==t?4:3,--f;f%a;f++)h+="0";for(f=(p=O(h,i,t)).length;!p[f-1];--f);for(a=1,h="1.";a<f;a++)h+=l.charAt(p[a])}else h=h.charAt(0)+"."+h.slice(1);h=h+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)h="0"+h;h="0."+h}else if(++o>f)for(o-=f;o--;)h+="0";else o<f&&(h=h.slice(0,o)+"."+h.slice(o))}else h=v?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=V(e);return e.s<0?"-"+h:h}function ee(e,t){if(e.length>t)return e.length=t,!0}function te(e){return new this(e).abs()}function ne(e){return new this(e).acos()}function re(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function oe(e){return new this(e).asin()}function se(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?A(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=A(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(D(e,t,o,1)),t=A(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(D(e,t,o,1)):(n=A(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function le(e){return new this(e).cbrt()}function fe(e){return L(e=new this(e),e.e+1,2)}function de(e){if(!e||"object"!=typeof e)throw Error(g+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,c,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=h[n]),void 0!==(r=e[n])){if(!(w(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(m+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=h[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(m+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function he(e){return new this(e).cos()}function pe(e){return new this(e).cosh()}function ge(e,t){return new this(e).div(t)}function me(e){return new this(e).exp()}function ve(e){return L(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(p=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return p=!0,new this(1/0);n=t}return p=!0,n.sqrt()}function we(e){return e instanceof o||e&&"[object Decimal]"===e.name||!1}function be(e){return new this(e).ln()}function Ee(e,t){return new this(e).log(t)}function xe(e){return new this(e).log(2)}function Re(e){return new this(e).log(10)}function Te(){return z(this,arguments,"lt")}function _e(){return z(this,arguments,"gt")}function Ce(e,t){return new this(e).mod(t)}function Ne(e,t){return new this(e).mul(t)}function ke(e,t){return new this(e).pow(t)}function qe(e){var t,n,r,i,o=0,s=new this(1),a=[];if(void 0===e?e=this.precision:S(e,1,c),r=Math.ceil(e/C),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(r=a[--o],e%=C,r&&e&&(i=b(10,C-e),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=C)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<C&&(n-=C-r)}return s.e=n,s.d=a,s}function Me(e){return L(e=new this(e),e.e+1,this.rounding)}function Se(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Pe(e){return new this(e).sin()}function Oe(e){return new this(e).sinh()}function De(e){return new this(e).sqrt()}function Le(e,t){return new this(e).sub(t)}function Ie(e){return new this(e).tan()}function Fe(e){return new this(e).tanh()}function je(e){return L(e=new this(e),e.e+1,1)}(o=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,e instanceof o)return i.s=e.s,void(p?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(p?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):J(i,e.toString())}if("string"!==r)throw Error(m+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),T.test(e)?J(i,e):Z(i,e)}if(o.prototype=q,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=de,o.clone=e,o.isDecimal=we,o.abs=te,o.acos=ne,o.acosh=re,o.add=ie,o.asin=oe,o.asinh=se,o.atan=ae,o.atanh=ue,o.atan2=ce,o.cbrt=le,o.ceil=fe,o.cos=he,o.cosh=pe,o.div=ge,o.exp=me,o.floor=ve,o.hypot=ye,o.ln=be,o.log=Ee,o.log10=Re,o.log2=xe,o.max=Te,o.min=_e,o.mod=Ce,o.mul=Ne,o.pow=ke,o.random=qe,o.round=Me,o.sign=Se,o.sin=Pe,o.sinh=Oe,o.sqrt=De,o.sub=Le,o.tan=Ie,o.tanh=Fe,o.trunc=je,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(h)).default=o.Decimal=o,f=new o(f),d=new o(d),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()}]));